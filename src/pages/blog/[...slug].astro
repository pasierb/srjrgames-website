---
import { getCollection, render } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.id },
        props: { post },
    }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Layout>
    <article class="post-page">
        <header class="post-header">
            <div class="container">
                <a href="/blog" class="back-link">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path d="m15 18-6-6 6-6"></path></svg
                    >
                    Back to Blog
                </a>
                <div class="meta">
                    <span
                        >{
                            post.data.pubDate.toLocaleDateString("en-US", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })
                        }</span
                    >
                    <span class="dot">â€¢</span>
                    <span>By {post.data.author}</span>
                </div>
                <h1>{post.data.title}</h1>
            </div>
        </header>

        <main class="container">
            <div class="post-content">
                <Content />
            </div>
        </main>
    </article>
</Layout>

<style>
    .post-page {
        padding-bottom: 8rem;
    }

    .post-header {
        padding: 6rem 0 4rem;
        background: var(--color-white);
        border-bottom: 3px solid var(--color-navy);
        margin-bottom: 4rem;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 0 2rem;
    }

    .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--color-navy);
        font-weight: 600;
        margin-bottom: 2rem;
        opacity: 0.7;
    }

    .back-link:hover {
        opacity: 1;
        color: var(--color-red);
    }

    .meta {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1rem;
        color: var(--color-text);
        opacity: 0.7;
        margin-bottom: 1rem;
        font-weight: 600;
    }

    .dot {
        color: var(--color-red);
    }

    h1 {
        font-size: 3.5rem;
        line-height: 1.1;
        margin: 0;
    }

    .post-content {
        font-size: 1.25rem;
        line-height: 1.8;
        color: var(--color-text);
    }

    .post-content :global(h2) {
        font-size: 2.25rem;
        margin: 3rem 0 1.5rem;
    }

    .post-content :global(h3) {
        font-size: 1.75rem;
        margin: 2rem 0 1rem;
    }

    .post-content :global(p) {
        margin-bottom: 1.5rem;
    }

    .post-content :global(ul) {
        margin-bottom: 1.5rem;
        padding-left: 1.5rem;
    }

    .post-content :global(li) {
        margin-bottom: 0.5rem;
    }

    .post-content :global(strong) {
        color: var(--color-navy);
    }

    @media (max-width: 768px) {
        h1 {
            font-size: 2.5rem;
        }

        .post-header {
            padding: 4rem 0 2rem;
        }
    }
</style>
